<ngx-spinner
  bdColor="rgba(0,0,0,.3)"
  size="medium"
  color="#fff"
  type="ball-clip-rotate-multiple"
></ngx-spinner>

<form [formGroup]="form" #formGroup="ngForm">
  <div class="content-wrapper">
    <div class="row mt-4 pt-3">
      <div class="col-sm-11 col-md-12">
        <div class="row">
          <div class="col-sm-12 col-md-4 mb-4 mb-lg-0 item">
            <div class="item__title">
              Collateral asset
            </div>
            <div>
              <mat-form-field>
                <mat-select
                  placeholder="Select a Token"
                  formControlName="collateralAsset"
                  (selectionChange)="onCollateralAssetChange($event.value)"
                  required
                >
                  <mat-option
                    *ngFor="let currency of currencies"
                    [value]="currency.symbol"
                  >
                    <div class="d-flex align-items-center py-1">
                      <app-currency-logo
                        [address]="currency.address"
                      ></app-currency-logo>
                      <span class="ml-3">
                        {{ currency.symbol }}
                      </span>
                    </div>
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="col-sm-12 col-md-4 item item--amount">
            <div class="item__title">
              Collateral amount
            </div>
            <div>
              <mat-form-field>
                <input
                  matInput
                  type="number"
                  min="0"
                  max="10000000"
                  formControlName="collateralAmount"
                  placeholder="0"
                  (keyup)="onCollateralAmountChange($event.value)"
                  pattern="^(0*[1-9][0-9]*(\.[0-9]+)?|0+\.[0-9]*[1-9][0-9]*)$"
                  required
                />
              </mat-form-field>
            </div>
          </div>
        </div>
        <div class="row mt-3 mt-lg-5 pt-4">
          <div class="col-lg-12 item">
            <div class="item__title">
              Liquidation Ratio
            </div>
            <div class="row mt-4 mb-3">
              <div class="col col-sm-12 col-lg-8">
                <mat-radio-group
                  formControlName="liquidationRatio"
                  aria-label="Select an option"
                  (change)="onLiquidationRatioChange()"
                >
                  <mat-radio-button
                    color="primary"
                    [value]="125"
                  >
                    125%
                  </mat-radio-button>
                  <mat-radio-button
                    color="primary"
                    [value]="150"
                    class="ml-4"
                  >
                    150%
                  </mat-radio-button>
                </mat-radio-group>
              </div>
            </div>
            <div class="item__message item__message--info">
              <i class="fas fa-info-circle"></i> Lorem ipsum dolor sit amet, consectetur adipiscing elit.
            </div>
          </div>
        </div>
        <div class="row mt-3 mt-lg-5 pt-4 mb-4 pb-2">
          <div class="col col-lg-12 item item--slider">
            <div class="item__title">
              Balance ratio
            </div>
            <div class="item__subtitle">
              Select the interest you want to pay
            </div>
            <div class="row mt-4 mb-3">
              <div class="col col-sm-12 col-lg-7">
                <mat-slider
                  class="percentage"
                  step="1"
                  tickInterval="25"
                  color="primary"
                  thumbLabel="true"
                  formControlName="collateralAdjustment"
                  [displayWith]="formatPercentage"
                  [disabled]="!form?.value.collateralAsset"
                  [min]="form?.value.liquidationRatio"
                  [max]="400"
                  (change)="onCollateralRatioChange()"
                ></mat-slider>
                <div class="item__percentage">
                  <div class="item__percentage-amount">
                    {{ form?.value.liquidationRatio }} %
                  </div>
                  <div class="item__percentage-amount">
                    400 %
                  </div>
                </div>
              </div>
            </div>
            <div
              *ngIf="form?.value.collateralAsset"
              class="item__message item__message--info"
            >
              <i class="fas fa-info-circle"></i> Lorem ipsum dolor sit amet, consectetur adipiscing elit.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
